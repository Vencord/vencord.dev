---
import "normalize.css";
import "../styles/prose.css";

import Footer from "../components/Footer.astro";
import NavBar from "../components/NavBar.astro";

export interface Props {
    title?: string;
    description: string;
    opengraph?: boolean;
}

const { title, description, opengraph } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" href="/assets/favicon.png" />

        <link rel="preload" href="/fonts/Inter.var-subset.woff2" as="font" type="font/woff2" />

        <title>{title && `${title} | `}Vencord</title>
        <meta name="description" content={description} />
        <meta name="author" content="Vencord Contributors" />
        <meta name="theme-color" content="#dd7878" />

        {
            opengraph !== false && (
                <>
                    <meta name="og:type" content="website" />
                    <meta name="og:title" content={title ?? "Vencord"} />
                    <meta name="og:description" content={description} />
                    <meta name="og:url" content={Astro.url} />
                    <meta name="og:image" content={new URL("/assets/favicon.png", Astro.site)} />
                </>
            )
        }
        {/* FIXME: Seems to be a bug in Astro because this statement doesn't work in the above block. */}
        {(title && opengraph !== false) && <meta name="og:site_name" content="Vencord" />}

        <link rel="sitemap" href="/sitemap-index.xml" />
    </head>
    <body>
        <NavBar />
        <div>
            <slot />
        </div>
        <Footer />
    </body>
</html>

<style>
    :root {
        --bg0: #1d2021;
        --bg1: #282828;
        --bg2: #282828;
        --bg3: #3c3836;
        --bg4: #3c3836;
        --bg5: #504944;

        --bgDim: #141617;

        --bgCurrentWord: #32302f;

        --bgDiffGreen: #32361a;
        --bgDiffBlue: #0d3138;
        --bgDiffRed: #3c1f1e;

        --bgVisualYellow: #473c29;
        --bgVisualGreen: #333e34;
        --bgVisualBlue: #2e3b3b;
        --bgVisualRed: #442e2d;

        --bgAccentYellow: #d8a656;
        --bgAccentGreen: #a8b665;
        --bgAccentRed: #ea6962;

        --accentRed: #ea6962;
        --accentOrange: #e78a4f;
        --accentYellow: #d8a656;
        --accentGreen: #a8b665;
        --accentAqua: #89b481;
        --accentBlue: #7caea3;
        --accentPurple: #d3869b;

        --accentPurpleRgb: 211, 133, 155;

        --fg0: #d4be98;
        --fg1: #ddc7a0;

        --grey0: #7c6f64;
        --grey1: #918274;
        --grey2: #a79a83;

        --astro-code-color-text: var(--fg0);
        --astro-code-color-background: var(--bg0);
        --astro-code-token-constant: var(--accentAqua);
        --astro-code-token-string: var(--accentYellow);
        --astro-code-token-string-expression: var(--accentYellow);
        --astro-code-token-comment: var(--grey1);
        --astro-code-token-keyword: var(--accentOrange);
        --astro-code-token-parameter: var(--accentBlue);
        --astro-code-token-function: var(--accentGreen);
        --astro-code-token-punctuation: var(--fg0);
        --astro-code-token-link: var(--accentBlue);
    }

    @media (prefers-color-scheme: light) {
        :root {
            --bg0: #f9f5d7;
            --bg1: #f5edca;
            --bg2: #f2eac7;
            --bg3: #f2e4bc;
            --bg4: #efdfb7;
            --bg5: #ebdbb2;

            --bgDim: #f2eac7;

            --bgCurrentWord: #f2eac7;

            --bgDiffGreen: #e4edc7;
            --bgDiffBlue: #e0e9d3;
            --bgDiffRed: #f8e4c9;

            --bgVisualYellow: #f9e9bf;
            --bgVisualGreen: #dce5c2;
            --bgVisualBlue: #d8e1cc;
            --bgVisualRed: #f0ddc3;

            --bgAccentYellow: #a96b2d;
            --bgAccentGreen: #6f8252;
            --bgAccentRed: #ae5858;

            --accentRed: #c14a4a;
            --accentOrange: #c35e0a;
            --accentYellow: #b37109;
            --accentGreen: #6c782e;
            --accentAqua: #4b7a5d;
            --accentBlue: #45707a;
            --accentPurple: #945e80;

            --accentPurpleRgb: 148, 94, 128;

            --fg0: #644735;
            --fg1: #503829;

            --grey0: #a79a83;
            --grey1: #928374;
            --grey2: #7c6f64;
        }
    }

    @font-face {
        font-family: "Inter";
        src: url("/fonts/Inter.var-subset.woff2") format("woff2");
        font-weight: 100 900;
        font-display: swap;
        font-style: normal;
        font-named-instance: "Regular";
    }

    html {
        font-family: Inter, system-ui, sans-serif;
        font-weight: var(--fontWeightRegular);
        line-height: 1.5;
    }

    body {
        --horizontal-margin: 20%;

        display: flex;
        flex-direction: column;
        justify-content: flex-start;

        min-height: 100vh;

        background-color: var(--bg1);
        color: var(--fg0);
    }

    div {
        margin: 2em var(--horizontal-margin);
        height: 100%;
        flex: 1;
        position: relative;
    }

    @media screen and (max-width: 1200px) {
        body {
            --horizontal-margin: 5%;
        }
    }
</style>

<style is:global>
    .no-wrap {
        white-space: nowrap;
    }

    ::selection {
        background-color: var(--fg0);
        color: var(--bg1);
    }

    pre code {
        counter-reset: code-line-number;
        counter-increment: code-line-number 0;
    }

    pre code .line::before {
        content: counter(code-line-number);
        counter-increment: code-line-number;

        display: inline-block;
        width: 1rem;
        margin-right: 1.5rem;
        text-align: right;

        color: var(--grey0);
    }

    a {
        color: var(--accentBlue);
    }
</style>
