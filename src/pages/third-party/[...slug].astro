---
export const prerender = true;

import { type CollectionEntry, getCollection } from "astro:content";

import Layout from "layouts/Layout.astro";

export async function getStaticPaths() {
    const resources = await getCollection("thirdParty");
    return resources.map(r => {
        return {
            params: {
                slug: r.slug,
            },
            props: {
                entry: r,
            },
        };
    });
}

export interface Props {
    entry: CollectionEntry<"thirdParty">;
}

const { entry } = Astro.props;
const { Content } = await entry.render();

const slug = Astro.params.slug!;
---

<Layout
    title={`${entry.data.title} | Resources`}
    description={entry.data.description}
    breadcrumbs={[
        ["Third-party", "/third-party"],
        [entry.data.title, "/third-party/" + slug],
    ]}
>
    <div class="header">
        <h1 class="p-page-title">{entry.data.title}</h1>
        <p class="p-subtitle">
            by {entry.data.author} â€¢ <span class="resource-type"
                >{entry.data.type}</span
            >
        </p>

        <p>{entry.data.description}</p>
    </div>

    <hr />

    <div id="resource-content">
        <Content />
    </div>
</Layout>

<style>
    h2 {
        font-size: 1.75em !important;
        line-height: normal;
    }

    hr {
        display: block;
        height: 1px;
        border: 0;
        border-top: 1.5px solid var(--grey2);
        margin: 1.5em 0;
        padding: 0;
    }

    .resource-type {
        color: var(--accentAqua);
    }

    .p-subtitle {
        margin-top: 3px;
    }

    ul {
        padding: 0;
        margin-top: 0.25em;
        margin-bottom: 0;
    }

    li {
        list-style: none;

        padding: 0.25em 1em;
    }

    a {
        color: var(--fg0);
        text-decoration: none;
    }

    .active {
        font-weight: var(--fontWeightSemiBold);
    }

    summary {
        color: var(--accent);
        cursor: pointer;
    }

    #resource-content :global(code:not(pre > code)) {
        background-color: var(--bg4);
        color: var(--accentAqua);
        border-radius: 8px;
        font-family: unset;
        text-align: center;
        padding: 0.05em 0.3em;
    }

    #resource-content :global(.astro-code) {
        padding: 1em;
        border-radius: 6px;
    }
</style>
